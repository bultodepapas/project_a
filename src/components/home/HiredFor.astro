---
import { t } from '@/i18n';
import type { Lang } from '@/i18n/config';

interface Props {
  lang: Lang;
  items: Array<{
    key: string;
    caseSlug: string;
  }>;
}

const { lang, items } = Astro.props;
---

<section class="section" id="hired-for">
  <div class="container">
    <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-12 reveal-element opacity-0 translate-y-4 transition-all duration-700">
      {t(lang, 'hiredFor.title')}
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {items.map((item, index) => (
        <a
          href={`/${lang}/case-studies/${item.caseSlug}`}
          class="group block p-4 rounded-lg border border-transparent hover:border-accent hover:bg-background-alt transition-all reveal-element opacity-0 translate-y-8 duration-700"
          style={`transition-delay: ${index * 150}ms`}
        >
          <span class="text-5xl font-bold text-accent/20 group-hover:text-accent/40 transition-colors">
            {String(index + 1).padStart(2, '0')}
          </span>
          <p class="text-lg font-medium text-foreground mt-2 group-hover:text-accent transition-colors">
            {t(lang, `hiredFor.bullets.${item.key}`)}
          </p>
        </a>
      ))}
    </div>
  </div>
</section>

<script>
  function initHiredFor() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.remove('opacity-0', 'translate-y-4', 'translate-y-8');
          entry.target.classList.add('opacity-100', 'translate-y-0');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '50px'
    });

    document.querySelectorAll('#hired-for .reveal-element').forEach((el) => {
      observer.observe(el);
    });
  }

  // Initialize on load
  initHiredFor();

  // Re-initialize on view transitions
  document.addEventListener('astro:page-load', initHiredFor);
</script>