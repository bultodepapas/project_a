---
/**
 * Home Page (Cinematic)
 * Main landing page with all sections
 */

import Page from '@/layouts/Page.astro';
import { getLangOrRedirect, getLangStaticPaths } from '@/lib/i18n-routing';
import { t } from '@/i18n';
import Hero from '@/components/home/Hero.astro';
import ProofStrip from '@/components/home/ProofStrip.astro';
import HiredFor from '@/components/home/HiredFor.astro';
import ChapterDeck from '@/components/home/ChapterDeck.astro';
import OperatingModel from '@/components/home/OperatingModel.astro';
import Timeline from '@/components/home/Timeline.astro';
import Education from '@/components/home/Education.astro';
import Languages from '@/components/home/Languages.astro';
import Awards from '@/components/home/Awards.astro';
import Contact from '@/components/home/Contact.astro';
import homeData from '@/data/home.json';
import proofData from '@/data/proof.json';
import experienceData from '@/data/experience.json';
import educationData from '@/data/education.json';
import languagesData from '@/data/languages.json';
import awardsData from '@/data/awards.json';
import siteData from '@/data/site.json';

// Generate static paths for each language
export function getStaticPaths() {
  return getLangStaticPaths();
}

const { lang } = Astro.params;

const { lang: typedLang, redirect } = getLangOrRedirect(lang, '/en');
if (redirect) {
  return Astro.redirect(redirect);
}

const proofItems = proofData.items;
const roles = experienceData.roles;
const educationItems = educationData.items;
const languageItems = languagesData.items;
const awards = awardsData.items;

---

<Page
  title={t(typedLang, 'site.title')}
  description={t(typedLang, 'site.description')}
  lang={typedLang}
  ogType="profile"
>
  <!-- Hero Section -->
  <Hero 
    lang={typedLang} 
    chips={homeData.hero.chips}
    location={siteData.location[typedLang]}
    email={siteData.email}
    linkedin={siteData.linkedin}
  />

  <!-- Proof Strip Section -->
  <ProofStrip 
    lang={typedLang} 
    items={proofItems} 
  />

  <!-- What I'm Hired For Section -->
  <HiredFor 
    lang={typedLang} 
    items={homeData.hiredFor.items} 
  />

  <!-- Systems Portfolio Section (ChapterDeck) -->
  <ChapterDeck 
    lang={typedLang} 
    chapters={homeData.systems.cards} 
  />

  <!-- Operating Model Section -->
  <OperatingModel 
    lang={typedLang} 
    model={homeData.operatingModel} 
  />

  <!-- Timeline Section -->
  <Timeline 
    lang={typedLang} 
    roles={roles} 
  />

  <!-- Education Section -->
  <Education 
    lang={typedLang} 
    items={educationItems} 
  />

  <!-- Languages Section -->
  <Languages 
    lang={typedLang} 
    items={languageItems} 
  />

  <!-- Awards Section -->
  <Awards 
    lang={typedLang} 
    items={awards} 
  />

  <!-- Contact Section -->
  <Contact 
    lang={typedLang} 
    email={siteData.email}
    location={siteData.location[typedLang]}
    linkedin={siteData.linkedin}
  />
</Page>
