---
import { type Lang, getLocalizedPath, langNamesShort, supportedLangs } from '@/i18n/config';

interface Props {
  currentLang: Lang;
  currentPath: string;
}

const { currentLang, currentPath } = Astro.props;
---

<div class="flex items-center gap-2 text-sm">
  {
    supportedLangs.map((lang, index) => {
      const isCurrent = lang === currentLang;
      const href = getLocalizedPath(currentPath, lang);
      const label = langNamesShort[lang];

      return (
        <>
          {index > 0 && <span class="text-muted/40" aria-hidden="true">|</span>}
          {isCurrent ? (
            <span class="font-medium text-foreground cursor-default" aria-current="page">
              {label}
            </span>
          ) : (
            <a
              href={href}
              class="text-muted hover:text-foreground transition-colors"
              aria-label={`Switch to ${label}`}
              hreflang={lang}
            >
              {label}
            </a>
          )}
        </>
      );
    })
  }
</div>
